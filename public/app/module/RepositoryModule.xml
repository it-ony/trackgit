<module:RepositoryModuleClass xmlns="http://www.w3.org/1999/xhtml"
                              xmlns:module="app.module"
                              xmlns:js="js.core" xmlns:ui="js.ui" xmlns:conf="js.conf">

    <js:Router>
        <conf:RouteConfiguration route="^user/([^/]+)/([^/]+)(?:/milestone/(\d+))?.*$" onexec="showRepository"/>
    </js:Router>

    <js:Head title="{title()}" author="{user.name}"/>

    <js:Content name="header">
        <p class="repository">
            <span class="user">{user.login}</span>/
            <span class="repository">{repository.name}</span>
        </p>
    </js:Content>

    <js:Content name="main">
        <div class="container-fluid">
            <div class="row">
                <div class="span3">
                    <div class="repository-information">
                        <div class="avatar">
                            <img src="{user.avatar_url}&amp;s=25" alt="{user.name}"/>
                        </div>
                        <a href="#/user/{user.login}" class="user">{user.name}</a>
                    </div>

                    <h3>Milestones</h3>
                    <ul>
                        <li class="backlog">
                            <a href="user/{user.login}/{repository.name}">Backlog</a>
                        </li>
                        <li class="open-milestones milestones">
                            <ui:ListView items="{openMilestones}" itemKey="milestone">
                                <js:Template name="item">
                                    <a href="/user/{user.login}/{repository.name}/milestone/{milestone.number}">
                                        {milestone.title}
                                    </a>
                                </js:Template>
                            </ui:ListView>
                        </li>
                        <li class="closed-milestones milestones">
                            <a onclick="showClosed" visible="{not(closedMilestones)}">Show
                                closed
                            </a>
                            <ui:ListView items="{closedMilestones}" itemKey="milestone" visible="{closedMilestones}">
                                <a href="/user/{user.login}/{repository.name}/milestone/{milestone.number}">
                                    {milestone.title}
                                </a>
                            </ui:ListView>
                        </li>
                    </ul>
                </div>
                <div class="span3">
                    <ui:ListView items="{openIssues()}" itemKey="issue">
                        <div>
                            <a href="/user/{user.login}/{repository.name}/issue/{issue.number}">
                                #{issue.number}
                                <span>{issue.title}</span>
                            </a>
                        </div>
                    </ui:ListView>
                </div>
                <div class="span3">

                </div>
                <div class="span3">

                </div>
            </div>
        </div>

    </js:Content>

</module:RepositoryModuleClass>